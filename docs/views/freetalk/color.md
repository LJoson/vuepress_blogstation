---
title: 浅谈图像颜色空间及相互变换
date: 2020-07-10 20:41:12
sidebar: true
sidebarDepth: 5
tags: 
- 图像处理
categories:
- "杂谈"
isShowComments: true
---


[[toc]]

# RGB、YUV和HSV颜色空间模型

## 概述

颜色通常用三个独立的属性来描述，三个独立变量综合作用，自然就构成一个空间坐标，这就是颜色空间。但被描述的颜色对象本身是客观的，不同颜色空间只是从不同的角度去衡量同一个对象。颜色空间按照基本机构可以分为两大类：基色颜色空间和色、亮分离的颜色空间。前者典型的是RGB，后者包括YUV和HSV等等。

## RGB颜色空间
- 计算机色彩显示器和彩色电视机显示色彩的原理一样，都是采用R、G、B相加混色的原理，通过发射出三种不同强度的电子束，使屏幕内侧覆盖的红、绿、蓝磷光材料发光而产生色彩。这种色彩的表示方法称为RGB色彩空间表示。

- 在RGB颜色空间中，任意色光F都可以用R、G、B三色不同分量的相加混合而成：F=r[R]+r[G]+r[B]。RGB色彩空间还可以用一个三维的立方体来描述。当三基色分量都为0(最弱)时混合为黑色光；当三基色都为k(最大，值由存储空间决定)时混合为白色光。RGB颜色空间示意图如图：

![](https://upload-images.jianshu.io/upload_images/2262529-e9d79774a8e387af.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp)

- RGB色彩空间根据每个分量在计算机中占用的存储字节数分为如下几种类型：<br/>

（1）RGB555<br/>
RGB555是一种16位的RGB格式，各分量都用5位表示，剩下的一位不用。高字节 -> 低字节：XRRRRRGGGGGBBBBB<br/>
（2）RGB565<br/>
RGB565也是一种16位的RGB格式，但是R占用5位，G占用6位，B占用5位。<br/>
（3）RGB24<br/>
RGB24是一种24位的RGB格式，各分量占用8位，取值范围为0-255。这种是比较常用的一种类型，对于bmp格式图像。<br/>
（4）RGB32<br/>
RGB24是一种32位的RGB格式，各分量占用8位，剩下的8位作Alpha通道或者不用。<br/>
- RGB色彩空间采用物理三基色表示，因而物理意义很清楚，适合彩色显象管工作。然而这一体制并不适应人的视觉特点。因而，产生了其它不同的色彩空间表示法。

## YUV/YCbCr颜色空间
- YUV(亦称YCrCb)是被欧洲电视系统所采用的一种颜色编码方法。在现代彩色电视系统中，通常采用三管彩色摄像机或彩色CCD摄影机进行取像，然后把取得的彩色图像信号经分色、分别放大校正后得到RGB，再经过矩阵变换电路得到亮度信号Y和两个色差信号R-Y(即U)、B-Y(即V)，最后发送端将亮度和两个色差总共三个信号分别进行编码，用同一信道发送出去。这种色彩的表示方法就是所谓的YUV色彩空间表示。采用YUV色彩空间的重要性是它的亮度信号Y和色度信号U、V是分离的。如果只有Y信号分量而没有U、V信号分量，那么这样表示的图像就是黑白灰度图像。彩色电视采用YUV空间正是为了用亮度信号Y解决彩色电视机与黑白电视机的兼容问题，使黑白电视机也能接收彩色电视信号。

- YUV主要用于优化彩色视频信号的传输，使其向后相容老式黑白电视。与RGB视频信号传输相比，它最大的优点在于只需占用极少的频宽（RGB要求三个独立的视频信号同时传输）。其中“Y”表示明亮度（Luminance或Luma），也就是灰阶值；而“U”和“V” 表示的则是色度（Chrominance或Chroma），作用是描述影像色彩及饱和度，用于指定像素的颜色。“亮度”是透过RGB输入信号来建立的，方法是将RGB信号的特定部分叠加到一起。“色度”则定义了颜色的两个方面─色调与饱和度，分别用Cr和Cb来表示。其中，Cr反映了RGB输入信号红色部分与RGB信号亮度值之间的差异。而Cb反映的是RGB输入信号蓝色部分与RGB信号亮度值之同的差异。
- YUV和RGB互相转换的公式如下（RGB取值范围均为0-255）︰

```
Y = 0.299R + 0.587G + 0.114B
U = -0.147R - 0.289G + 0.436B
V = 0.615R - 0.515G - 0.100B

R = Y + 1.14V
G = Y - 0.39U - 0.58V
B = Y + 2.03U
```

## HSV颜色空间
- HSV是一种将RGB色彩空间中的点在倒圆锥体中的表示方法。HSV即色相(Hue)、饱和度(Saturation)、明度(Value)，又称HSB(B即Brightness)。色相是色彩的基本属性，就是平常说的颜色的名称，如红色、黄色等。饱和度（S）是指色彩的纯度，越高色彩越纯，低则逐渐变灰，取0-100%的数值。明度（V），取0-max(计算机中HSV取值范围和存储的长度有关)。HSV颜色空间可以用一个圆锥空间模型来描述。圆锥的顶点处，V=0，H和S无定义，代表黑色。圆锥的顶面中心处V=max，S=0，H无定义，代表白色。HSV颜色空间示意图：

![](https://upload-images.jianshu.io/upload_images/2262529-0e68c5861e37a8c9.png?imageMogr2/auto-orient/strip|imageView2/2/w/490/format/webp)

HSV颜色空间
- RGB颜色空间中，三种颜色分量的取值与所生成的颜色之间的联系并不直观。而HSV颜色空间，更类似于人类感觉颜色的方式，封装了关于颜色的信息

- RGB和HSV转换<br>

(1）从RGB到HSV<br>
设max等于r、g和b中的最大者，min为最小者。对应的HSV空间中的(h,s,v)值为：

![](https://upload-images.jianshu.io/upload_images/2262529-211e896b456c530f.png?imageMogr2/auto-orient/strip|imageView2/2/w/513/format/webp)

（2）从HSV转RGB

![](https://upload-images.jianshu.io/upload_images/2262529-2d6d9b20e974594f.png?imageMogr2/auto-orient/strip|imageView2/2/w/597/format/webp)

## CMY/CMYK颜色空间

CMY是工业印刷采用的颜色空间。它与RGB对应。简单的类比RGB来源于是物体发光，而CMY是依据反射光得到的。具体应用如打印机：一般采用四色墨盒，即CMY加黑色墨盒
## HSI/HSL颜色空间

HSI颜色空间是为了更好的数字化处理颜色而提出来的。有许多种HSX颜色空间，其中的X可能是V,也可能是I，依据具体使用而X含义不同。H是色调，S是饱和度，I是强度。HSL（Hue, Saturation, Lightness）颜色模型，这个颜色模型都是用户台式机图形程序的颜色表示， 用六角形锥体表示自己的颜色模型。
## Lab颜色空间

Lab颜色模型是由CIE（国际照明委员会）制定的一种色彩模式。自然界中任何一点色都可以在Lab空间中表达出来，它的色彩空间比RGB空间还要大。另外，这种模式是以数字化方式来描述人的视觉感应， 与设备无关，所以它弥补了RGB和CMYK模式必须依赖于设备色彩特性的不足。由于Lab的色彩空间要比RGB模式和CMYK模式的色彩空间大。这就意味着RGB以及CMYK所能描述的色彩信息在Lab空间中都能 得以影射。Lab颜色模型取坐标Lab，其中L亮度；a的正数代表红色，负端代表绿色；b的正数代表黄色， 负端代表兰色(a,b)有L=116f(y)-16, a=500[f(x/0.982)-f(y)], b=200[f(y)-f(z/1.183 )]；其中： f(x)=7.787x+0.138, x<0.008856; f(x)=(x)1/3,x>0.008856

::: tip 参考链接
https://zhuanlan.zhihu.com/p/28741691

https://www.jianshu.com/p/89f8cd57ca48

:::